(this["webpackJsonptripper-admin-pannel"]=this["webpackJsonptripper-admin-pannel"]||[]).push([[56],{965:function(e,t,n){"use strict";n.r(t);var s=n(2),a=n(709),c=n(710),r=n(697),i=n(1),u=n(26),o=n(202),l=n(75),b=n(775),d=n(739),j=n.n(d),p=n(701),g=n(918),h=n(1e3),O=n(983),m=n(860),x=n(22);t.default=Object(o.b)((function(e){console.log("==========> Bus",e);var t=e.buses,n=e.loader;return{allBuses:t.allBuses,isLoading:n.loading}}),(function(e){return{actions:Object(l.b)({_getAllBus:function(e){return Object(b.g)(e)},_getFilterBus:function(e){return Object(b.j)(e)},_addBus:function(e){return Object(b.a)(e)},_deleteBus:function(e){return Object(b.d)(e)},_updateBus:function(e){return Object(b.n)(e)}},e)}}))((function(e){var t=g.a.useForm();Object(r.a)(t,1)[0];console.log("Props in Bus",e);var n=Object(u.g)(),o=Object(u.h)().search.match(/page=([0-9]+)/,""),l=Number(o&&o[1]?o[1]:1),b=Object(i.useState)(l),d=Object(r.a)(b,2),f=d[0],B=d[1],v=Object(i.useState)(10),y=Object(r.a)(v,2),k=y[0],w=(y[1],Object(i.useState)(null)),S=Object(r.a)(w,2),_=S[0],C=S[1],N=Object(i.useState)({isEditingBus:!1,editingBusId:null,openModal:!1,busName:"",busSeats:""}),E=Object(r.a)(N,2),A=E[0],M=E[1];Object(i.useEffect)((function(){l!==f&&B(l),L(f)}),[]);var P=function(){M({isEditingBus:!1,editingBusId:null,busName:"",busSeats:"",openModal:!1})},L=function(){var t=Object(c.a)(Object(a.a)().mark((function t(n){var s,c;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s={page:n,limit:k,searchText:_},t.next=4,e.actions._getAllBus(s);case 4:c=t.sent,console.log("========> get all bus repsonse",c),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error in get list",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=Object(c.a)(Object(a.a)().mark((function t(){var n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:f,limit:k,searchText:_},t.next=3,e.actions._getFilterBus(n);case 3:t.sent;case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Y=function(){var t=Object(c.a)(Object(a.a)().mark((function t(n){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.actions._deleteBus(n._id);case 3:t.sent,P(),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),O.a.error({message:t.t0.response&&t.t0.response.data?t.t0.response.data.message:"something went wrong",placement:"bottomRight"}),P();case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),F=function(){var t=Object(c.a)(Object(a.a)().mark((function t(){var n,s;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!A.isEditingBus){t.next=10;break}return n={name:A.busName,seats:A.busSeats},t.next=5,e.actions._updateBus({id:A.editingBusId,data:n});case 5:t.sent,L(l),P(),t.next=16;break;case 10:return s={name:A.busName,seats:A.busSeats},t.next=13,e.actions._addBus(s);case 13:t.sent,L(l),P();case 16:t.next=23;break;case 18:t.prev=18,t.t0=t.catch(0),console.log(t.t0),O.a.error({message:t.t0.response&&t.t0.response.data?t.t0.response.data.message:"something went wrong",placement:"bottomRight"}),P();case 23:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(){return t.apply(this,arguments)}}(),I=e.allBuses&&e.allBuses.data?e.allBuses.data:[],z=e.allBuses&&e.allBuses.pages?e.allBuses.pages:1,D=e.allBuses&&e.allBuses.limit?e.allBuses.limit:10;return console.log("========userDataArray",I,z,D),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(p.j,{children:Object(x.jsx)(p.k,{children:Object(x.jsx)(p.ub,{children:Object(x.jsxs)(p.u,{xl:12,children:[Object(x.jsxs)(p.j,{children:[Object(x.jsx)(p.n,{children:"Bus"}),Object(x.jsxs)(p.k,{children:[Object(x.jsxs)(p.ub,{children:[Object(x.jsx)(p.u,{xs:"12",md:"6",children:Object(x.jsxs)(p.ub,{children:[Object(x.jsx)(p.u,{xs:"12",md:"6",children:Object(x.jsx)(p.Q,{onChange:function(e){return C(e.target.value)},id:"company",placeholder:"Name/Phone"})}),Object(x.jsx)(p.u,{xs:"12",md:"6",children:Object(x.jsx)(m.a,{ghost:!0,onClick:T,type:"primary",children:"Search"})})]})}),Object(x.jsx)(p.u,{xs:"12",md:"6",children:Object(x.jsx)(m.a,{type:"primary",onClick:function(){M(Object(s.a)(Object(s.a)({},A),{},{openModal:!0}))},style:{float:"right",marginBottom:"18px"},ghost:!0,children:"Add"})})]}),Object(x.jsx)(p.y,{items:I,loading:e.isLoading,size:"lg",fields:[{key:"name",_classes:"font-weight-bold",_style:{padding:"0px 30px",width:"250px"}},{key:"seats",label:"Seats"},{key:"created",label:"Created",_style:{width:"300px"}},"actions"],hover:!0,striped:!0,itemsPerPage:D,activePage:f,clickableRows:!0,scopedSlots:{created:function(e){return Object(x.jsx)("td",{children:j()(e.created).format("Do MMM YYYY hh:mm a")})},actions:function(e){return Object(x.jsx)("td",{children:Object(x.jsxs)("div",{children:[Object(x.jsx)(m.a,{type:"primary",onClick:function(){return function(e){console.log("---------item",e),M(Object(s.a)(Object(s.a)({},A),{},{busName:e.name,busSeats:e.seats,editingBusId:e._id,isEditingBus:!0,openModal:!0}))}(e)},ghost:!0,children:"Edit"}),Object(x.jsx)(m.a,{type:"danger",onClick:function(){return function(e){try{h.a.confirm({title:"Are you sure delete this bus?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){return Y(e)},onCancel:function(){console.log("Cancel")}})}catch(t){}}(e)},style:{marginLeft:"5px"},ghost:!0,children:"Delete"})]})})}}}),Object(x.jsx)(p.qb,{activePage:f,onActivePageChange:function(e){l!==e&&n.push("/drivers?page=".concat(e)),B(e),L(e)},pages:z,doubleArrows:!1,align:"center"})]})]}),Object(x.jsx)(h.a,{visible:A.openModal,title:"Bus",onCancel:P,footer:[A.isEditingBus?Object(x.jsx)(m.a,{type:"primary",ghost:!0,loading:e.isLoading,size:"large",onClick:F,children:"Update"},"submit"):Object(x.jsx)(m.a,{type:"primary",ghost:!0,loading:e.isLoading,size:"large",onClick:F,children:"Add"},"submit")],children:Object(x.jsx)(p.ub,{children:Object(x.jsxs)(p.u,{xs:"12",md:"6",children:[Object(x.jsx)(p.ub,{children:Object(x.jsx)(p.u,{xs:"12",md:"12",children:Object(x.jsx)(p.Q,{style:{marginBottom:"20px"},value:A.busName,name:"busName",onChange:function(e){return M(Object(s.a)(Object(s.a)({},A),{},{busName:e.target.value}))},placeholder:"Enter bus name"})})}),Object(x.jsx)(p.ub,{children:Object(x.jsx)(p.u,{xs:"12",md:"12",children:Object(x.jsx)(p.Q,{value:A.busSeats,type:"number",name:"busSeats",onChange:function(e){return M(Object(s.a)(Object(s.a)({},A),{},{busSeats:e.target.value}))},placeholder:"Enter seats count"})})})]})})})]})})})})})}))}}]);
//# sourceMappingURL=56.34d42f63.chunk.js.map