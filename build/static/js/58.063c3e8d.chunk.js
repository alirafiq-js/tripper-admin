(this["webpackJsonptripper-admin-pannel"]=this["webpackJsonptripper-admin-pannel"]||[]).push([[58],{911:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r(709),i=r(710),c=r(697),s=r(1),o=r(26),l=r(202),d=r(75),u=r(763),j=r(739),b=r.n(j),p=r(701),h=r(918),v=r(1e3),g=r(983),O=r(860),m=r(22);t.default=Object(l.b)((function(e){console.log("==========> Driver",e);var t=e.drivers,r=(e.basicCodes,e.peerGroups,e.loader);return{allDrivers:t.allDrivers,isLoading:r.loading}}),(function(e){return{actions:Object(d.b)({_getAllDrivers:function(e){return Object(u.c)(e)},_getFilterDriver:function(e){return Object(u.d)(e)},_addDriver:function(e){return Object(u.a)(e)},_deleteDriver:function(e){return Object(u.b)(e)},_updateDriver:function(e){return Object(u.f)(e)}},e)}}))((function(e){var t=h.a.useForm();Object(c.a)(t,1)[0];console.log("Props in User",e);var r=Object(o.g)(),l=Object(o.h)().search.match(/page=([0-9]+)/,""),d=Number(l&&l[1]?l[1]:1),u=Object(s.useState)(d),j=Object(c.a)(u,2),x=j[0],f=j[1],D=Object(s.useState)(10),y=Object(c.a)(D,2),k=y[0],w=(y[1],Object(s.useState)(null)),C=Object(c.a)(w,2),P=C[0],_=C[1],N=Object(s.useState)({isEditingDriver:!1,editingDriverId:null,openModal:!1,driverName:"",driverPhone:""}),E=Object(c.a)(N,2),A=E[0],M=E[1];Object(s.useEffect)((function(){d!==x&&f(d),L(x)}),[]);var S=function(){M({isEditingDriver:!1,editingDriverId:null,driverName:"",driverPhone:"",openModal:!1})},L=function(){var t=Object(i.a)(Object(a.a)().mark((function t(r){var n,i;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={page:r,limit:k,searchText:P},t.next=4,e.actions._getAllDrivers(n);case 4:i=t.sent,console.log("========> get all user repsonse",i),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error in get list",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=Object(i.a)(Object(a.a)().mark((function t(){var r;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={page:x,limit:k,searchText:P},t.next=3,e.actions._getFilterDriver(r);case 3:t.sent;case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Y=function(){var t=Object(i.a)(Object(a.a)().mark((function t(r){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.actions._deleteDriver(r._id);case 3:t.sent,S(),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),g.a.error({message:t.t0.response&&t.t0.response.data?t.t0.response.data.message:"something went wrong",placement:"bottomRight"}),S();case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),F=function(){var t=Object(i.a)(Object(a.a)().mark((function t(){var r,n;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!A.isEditingDriver){t.next=10;break}return r={name:A.driverName,phone:A.driverPhone},t.next=5,e.actions._updateDriver({id:A.editingDriverId,data:r});case 5:t.sent,L(d),S(),t.next=16;break;case 10:return n={name:A.driverName,phone:"92".concat(A.driverPhone.slice(1))},t.next=13,e.actions._addDriver(n);case 13:t.sent,L(d),S();case 16:t.next=23;break;case 18:t.prev=18,t.t0=t.catch(0),console.log(t.t0),g.a.error({message:t.t0.response&&t.t0.response.data?t.t0.response.data.message:"something went wrong",placement:"bottomRight"}),S();case 23:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(){return t.apply(this,arguments)}}(),I=e.allDrivers&&e.allDrivers.data?e.allDrivers.data:[],z=e.allDrivers&&e.allDrivers.pages?e.allDrivers.pages:1,Q=e.allDrivers&&e.allDrivers.limit?e.allDrivers.limit:10;return console.log("========userDataArray",I,z,Q),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(p.j,{children:Object(m.jsx)(p.k,{children:Object(m.jsx)(p.ub,{children:Object(m.jsxs)(p.u,{xl:12,children:[Object(m.jsxs)(p.j,{children:[Object(m.jsx)(p.n,{children:"Drivers"}),Object(m.jsxs)(p.k,{children:[Object(m.jsxs)(p.ub,{children:[Object(m.jsx)(p.u,{xs:"12",md:"6",children:Object(m.jsxs)(p.ub,{children:[Object(m.jsx)(p.u,{xs:"12",md:"6",children:Object(m.jsx)(p.Q,{onChange:function(e){return _(e.target.value)},id:"company",placeholder:"Name/Phone"})}),Object(m.jsx)(p.u,{xs:"12",md:"6",children:Object(m.jsx)(O.a,{ghost:!0,onClick:T,type:"primary",children:"Search"})})]})}),Object(m.jsx)(p.u,{xs:"12",md:"6",children:Object(m.jsx)(O.a,{type:"primary",onClick:function(){M(Object(n.a)(Object(n.a)({},A),{},{openModal:!0}))},style:{float:"right",marginBottom:"18px"},ghost:!0,children:"Add"})})]}),Object(m.jsx)(p.y,{items:I,loading:e.isLoading,size:"lg",fields:[{key:"name",_classes:"font-weight-bold",_style:{padding:"0px 30px",width:"250px"}},{key:"phone",label:"Number"},{key:"created",label:"Created",_style:{width:"300px"}},"actions"],hover:!0,striped:!0,itemsPerPage:Q,activePage:x,clickableRows:!0,scopedSlots:{created:function(e){return Object(m.jsx)("td",{children:b()(e.created).format("Do MMM YYYY hh:mm a")})},actions:function(e){return Object(m.jsx)("td",{children:Object(m.jsxs)("div",{children:[Object(m.jsx)(O.a,{type:"primary",onClick:function(){return function(e){console.log("---------item",e),M(Object(n.a)(Object(n.a)({},A),{},{driverName:e.name,driverPhone:e.phone,editingDriverId:e._id,isEditingDriver:!0,openModal:!0}))}(e)},ghost:!0,children:"Edit"}),Object(m.jsx)(O.a,{type:"danger",onClick:function(){return function(e){try{v.a.confirm({title:"Are you sure delete this driver?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){return Y(e)},onCancel:function(){console.log("Cancel")}})}catch(t){}}(e)},style:{marginLeft:"5px"},ghost:!0,children:"Delete"})]})})}}}),Object(m.jsx)(p.qb,{activePage:x,onActivePageChange:function(e){d!==e&&r.push("/drivers?page=".concat(e)),f(e),L(e)},pages:z,doubleArrows:!1,align:"center"})]})]}),Object(m.jsx)(v.a,{visible:A.openModal,title:"Driver",onCancel:S,footer:[A.isEditingDriver?Object(m.jsx)(O.a,{type:"primary",ghost:!0,loading:e.isLoading,size:"large",onClick:F,children:"Update"},"submit"):Object(m.jsx)(O.a,{type:"primary",ghost:!0,loading:e.isLoading,size:"large",onClick:F,children:"Add"},"submit")],children:Object(m.jsx)(p.ub,{children:Object(m.jsxs)(p.u,{xs:"12",md:"6",children:[Object(m.jsx)(p.ub,{children:Object(m.jsx)(p.u,{xs:"12",md:"12",children:Object(m.jsx)(p.Q,{style:{marginBottom:"20px"},value:A.driverName,name:"driverName",onChange:function(e){return M(Object(n.a)(Object(n.a)({},A),{},{driverName:e.target.value}))},placeholder:"Enter a driver name"})})}),Object(m.jsx)(p.ub,{children:Object(m.jsx)(p.u,{xs:"12",md:"12",children:Object(m.jsx)(p.Q,{value:A.driverPhone,name:"driverPhone",onChange:function(e){return M(Object(n.a)(Object(n.a)({},A),{},{driverPhone:e.target.value}))},placeholder:"Enter a driver phone"})})})]})})})]})})})})})}))}}]);
//# sourceMappingURL=58.063c3e8d.chunk.js.map